<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.post.service.impl.PostMapper">

    <select id="selMyPostLst" parameterType="postVO" resultType="carmelHashMap">
        select * from posts p
            inner join post_images pi            
            on p.post_id = pi.post_id
        where p.member_id = #{memberId}
    </select>

    <select id="selMyProfileCnt" parameterType="postVO" resultType="Map">
        select 
            m.member_introduce as memberIntroduce,
            m.member_user_nick as memberUserNick,
            m.member_image_url as memberImageUrl,
            (select count(*) from follows f where f.follow_member_id = #{memberId}) AS  followCount,
            (select count(*) from follows f where f.member_id = #{memberId}) AS  followingCount,
            (select COUNT(*) from posts p where p.member_id = #{memberId}) as postsCount
        from `member` m
        where m.member_id  = #{memberId}
    </select>
</mapper>